"use strict";(self.webpackChunkswarmcloud_docs=self.webpackChunkswarmcloud_docs||[]).push([[1990],{1346:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>g,toc:()=>d});t(6540);var a=t(5680),o=t(4235),r=t(8328);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}const s={title:"Usage",sidebar_position:2,slug:"/"},c="Project Setup",g={unversionedId:"usage",id:"usage",title:"Usage",description:"Install dependencies",source:"@site/docs/ios/usage.mdx",sourceDirName:".",slug:"/",permalink:"/home/ios/",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Usage",sidebar_position:2,slug:"/"},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/home/ios/introduction"},next:{title:"API & Config",permalink:"/home/ios/API"}},u={},d=[{value:"Install dependencies",id:"install-dependencies",level:3},{value:"CocoaPods",id:"cocoapods",level:4},{value:"Carthage",id:"carthage",level:4},{value:"Swift Package Manager",id:"swift-package-manager",level:4},{value:"Manually",id:"manually",level:4},{value:"Download Pre-compiled XCFramework",id:"download-pre-compiled-xcframework",level:4},{value:"Copy the framework",id:"copy-the-framework",level:4},{value:"Include",id:"include",level:4},{value:"Initialize P2pEngine",id:"initialize-p2pengine",level:4},{value:"Usage",id:"usage",level:4},{value:"Demo",id:"demo",level:4},{value:"Troubleshooting Steps when P2P doesn&#39;t work",id:"troubleshooting-steps-when-p2p-doesnt-work",level:4}],y={toc:d},m="wrapper";function h(e){var{components:n}=e,t=p(e,["components"]);return(0,a.yg)(m,l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){i(e,n,t[n])})}return e}({},y,t),{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"project-setup"},"Project Setup"),(0,a.yg)("h3",{id:"install-dependencies"},"Install dependencies"),(0,a.yg)("h4",{id:"cocoapods"},"CocoaPods"),(0,a.yg)("p",null,"To install dependencies into your Xcode project using CocoaPods, specify it in your ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("em",{parentName:"strong"},"Podfile")),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-ruby"},"target 'TargetName' do\n# Uncomment the next line if you're using Swift\n# use_frameworks!\n    pod 'SwarmCloudKit', '~> 3.0'\nend\n")),(0,a.yg)("p",null,"Then, run the following command:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"$ pod install\n")),(0,a.yg)("h4",{id:"carthage"},"Carthage"),(0,a.yg)("p",null,"Add the dependencies to the Cartfile:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'binary "https://cdn.swarmcloud.net/apple/SwarmCloudKit.json" ~> 3.5.1\nbinary "https://cdn.swarmcloud.net/apple/Datachannel.json" ~> 1.0.232\n')),(0,a.yg)("p",null,"Then run:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"carthage update --use-xcframeworks --cache-builds\n")),(0,a.yg)("p",null,"This will build each one or download a pre-compiled XCFramework."),(0,a.yg)("br",null),"On your application targets\u2019 General settings tab, in the Frameworks, Libraries, and Embedded Content section, drag and drop each XCFramework you want to use from the ***Carthage/Build*** folder.",(0,a.yg)("h4",{id:"swift-package-manager"},"Swift Package Manager"),(0,a.yg)("p",null,"Once you have your Swift package set up, adding Alamofire as a dependency is as easy as adding it to the dependencies value of your Package.swift."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-swift"},'dependencies: [\n    .package(url: "https://github.com/swarm-cloud/SwarmCloudKit.git", branch: "main")\n]\n')),(0,a.yg)("h4",{id:"manually"},"Manually"),(0,a.yg)("h4",{id:"download-pre-compiled-xcframework"},"Download Pre-compiled XCFramework"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://cdn.swarmcloud.net/apple/3.5.1/SwarmCloudKit.zip"},"SwarmCloudKit.zip"))),(0,a.yg)("h4",{id:"copy-the-framework"},"Copy the framework"),(0,a.yg)("p",null,"Unzip files, then drag and drop SwarmCloudKit.xcframework and datachannel_wrapper.xcframework into your Xcode project on your application targets\u2019 General settings tab, in the Frameworks, Libraries, and Embedded Content section."),(0,a.yg)("h1",{id:"integration"},"Integration"),(0,a.yg)("h4",{id:"include"},"Include"),(0,a.yg)("p",null,"Import SwarmCloudKit in ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("em",{parentName:"strong"},"AppDelegate.m")),":"),(0,a.yg)(o.A,{groupId:"ios",mdxType:"Tabs"},(0,a.yg)(r.A,{value:"swift",label:"swift",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-swift"},"import SwarmCloudKit\n"))),(0,a.yg)(r.A,{value:"objectivec",label:"objective-c",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-objectivec"},"#import <SwarmCloudKit/SwarmCloudKit-Swift.h>\n")))),(0,a.yg)("h4",{id:"initialize-p2pengine"},"Initialize P2pEngine"),(0,a.yg)("p",null,"Initialize P2pEngine in ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("em",{parentName:"strong"},"AppDelegate.m")),":"),(0,a.yg)(o.A,{groupId:"ios",mdxType:"Tabs"},(0,a.yg)(r.A,{value:"swift",label:"swift",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-swift"},"func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\nlet config = P2pConfig(\n    trackerZone: .Europe     // Set HongKong or USA if you changed zone\n)\nP2pEngine.setup(token: YOUR_TOKEN, config: config)   // replace with your own token\nreturn true\n}\n"))),(0,a.yg)(r.A,{value:"objectivec",label:"objective-c",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-objectivec"},"- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n{\n  P2pConfig* config = [P2pConfig defaultConfiguration];\n  config.trackerZone = TrackerZoneEurope;    // Set HongKong or USA if you changed zone\n  [P2pEngine setupWithToken:YOUR_TOKEN config:config];  // replace with your own token\n  return YES;\n}\n")))),(0,a.yg)("p",null,"Where YOUR_TOKEN is your Customer ID. Please replace it by your own token obtained from console, click ",(0,a.yg)("a",{parentName:"p",href:"/guides/getting-started#for-mobile-app-integration"},"here")," for more information."),(0,a.yg)("h4",{id:"usage"},"Usage"),(0,a.yg)("p",null,"When initializing an AVPlayer (or any other video player) instance, before passing it a URL, pass that URL through P2P Engine:"),(0,a.yg)(o.A,{groupId:"ios",mdxType:"Tabs"},(0,a.yg)(r.A,{value:"swift",label:"swift",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-swift"},'let parsedUrl = P2pEngine.shared.parseStreamUrl("https://your_stream.m3u8")\n_player = AVPlayer.init(url: URL(string: parsedUrl)!)\n'))),(0,a.yg)(r.A,{value:"objectivec",label:"objective-c",mdxType:"TabItem"},(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-objectivec"},'NSString *parsedUrl = [[P2pEngine sharedInstance] parseStreamUrl:@"https://your_stream.m3u8"];\n_player = [[AVPlayer alloc] initWithURL:[NSURL URLWithString:parsedUrl]];\n')))),(0,a.yg)("p",null,"That\u2019s it! SDK should now be integrated into your app."),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"For macOS development:"),(0,a.yg)("br",null),"Xcode enables sandboxing by default on new applications. Ensure your application's entitlements allows incoming and outgoing connections by marking the respective checkboxes in the Network section."),(0,a.yg)("h4",{id:"demo"},"Demo"),(0,a.yg)("p",null,"A completed example can be found ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/cdnbye/ios-p2p-engine"},"here")),(0,a.yg)("h4",{id:"troubleshooting-steps-when-p2p-doesnt-work"},"Troubleshooting Steps when P2P doesn't work"),(0,a.yg)("p",null,"Click ",(0,a.yg)("a",{parentName:"p",href:"/guides/troubleshooting#troubleshooting-steps-of-mobile-sdk"},"here")))}h.isMDXComponent=!0}}]);